!function(){"use strict";const e=(e,t)=>{const n=`__${t}`;let o=e.target;for(;null!==o;){const e=o[n];if(e)return void e();o=o.parentNode}},t={};function n(e){if(3!==e.nodeType){if(void 0!==e.attributes)for(let t of e.attributes){let n=t.name;if("#"===n[0])return e.removeAttribute(n),n.slice(1)}return 0}{let t=e.nodeValue;return"#"===t[0]?(e.nodeValue="",t.slice(1)):0}}const o=document.createElement("template");function i(e){const t=e[0].replace(/\n*/g,"").replace(/\s*</g,"<").replace(/>\s*/g,">");o.innerHTML=t;const i=o.content.firstChild;return i.collect=function(e){let t,o,i,l,r,c,d=!1,s="";l=r="",(c=n(e))&&(r+=`refs.${c} = node;\n`);do{!d&&(t=e.firstChild)?(d=!1,o=s,l+=`let ${s+="_f"} = ${o||"node"}.firstChild;\n`,(c=n(t))&&(r+=`refs.${c} = ${s};\n`)):(t=e.nextSibling)?(d=!1,o=s,l+=`let ${s+="_n"} = ${o||"node"}.nextSibling;\n`,(c=n(t))&&(r+=`refs.${c} = ${s};\n`)):(s="n"===s[(i=s.length)-1]?s.slice(0,s.lastIndexOf("_f_n")):s.slice(0,i-2),t=e.parentNode,d=!0),e=t}while(e);return Function("node",l+"let refs = {};\n"+r+"return refs;\n")}(i),i}function l(e,t,n,o,i,l,c){if(0===o.length)return void(t.textContent="");if(0===n.length){let e;for(let n=0,l=o.length;n<l;n++)e=i(o[n]),t.appendChild(e);return}let d,s,a,u=0,f=0,p=!0,b=n.length-1,h=o.length-1,g=c?c.nextSibling:t.firstChild,v=g,m=t.lastChild,C=m;e:for(;p;){let i;for(p=!1,d=n[u],s=o[f];d[e]===s[e];){if(l(g,s),u++,f++,v=g=g.nextSibling,b<u||h<f)break e;d=n[u],s=o[f]}for(d=n[b],s=o[h];d[e]===s[e];){if(l(m,s),b--,h--,a=m,C=m=m.previousSibling,b<u||h<f)break e;d=n[b],s=o[h]}for(d=n[b],s=o[f];d[e]===s[e];){if(p=!0,l(m,s),i=m.previousSibling,t.insertBefore(m,v),C=m=i,f++,--b<u||h<f)break e;d=n[b],s=o[f]}for(d=n[u],s=o[h];d[e]===s[e];){if(p=!0,l(g,s),i=g.nextSibling,t.insertBefore(g,a),a=C=g,g=i,h--,b<++u||h<f)break e;d=n[u],s=o[h]}}if(h<f){if(u<=b){let e;for(;u<=b;)0===b?t.removeChild(m):(e=m.previousSibling,t.removeChild(m),m=e),b--}return}if(b<u){if(f<=h){let e,n=a?1:0;for(;f<=h;)e=i(o[f]),n?t.insertBefore(e,a):t.appendChild(e),f++}return}const x=new Array(h+1-f);for(let e=f;e<=h;e++)x[e]=-1;const N=new Map;for(let t=f;t<=h;t++)N.set(o[t][e],t);let S=0,$=[];for(let t=u;t<=b;t++)N.has(n[t][e])?(x[N.get(n[t][e])]=t,S++):$.push(t);if(0===S){if(c){let e,n=c.nextSibling;for(;u<=b;)e=n.nextSibling,t.removeChild(n),n=e,u++}else t.textContent="";let e;for(let n=f;n<=h;n++)e=i(o[n]),t.appendChild(e);return}const y=function(e,t){for(var n=[],o=[],i=-1,l=new Array(e.length),c=t,d=e.length;c<d;c++){var s=e[c];if(!(s<0)){var a=r(n,s);-1!==a&&(l[c]=o[a]),a===i?(n[++i]=s,o[i]=c):s<n[a+1]&&(n[a+1]=s,o[a+1]=c)}}for(c=o[i];i>=0;c=l[c],i--)n[i]=c;return n}(x,f),T=[];let k=g;for(let e=u;e<=b;e++)T[e]=k,k=k.nextSibling;for(let e=0;e<$.length;e++)t.removeChild(T[$[e]]);let _,w=y.length-1;for(let e=h;e>=f;e--)y[w]===e?(l(a=T[x[y[w]]],o[e]),w--):(-1===x[e]?_=i(o[e]):l(_=T[x[e]],o[e]),t.insertBefore(_,a),a=_)}function r(e,t){var n=-1,o=e.length;if(o>0&&e[o-1]<=t)return o-1;for(;o-n>1;){var i=Math.floor((n+o)/2);e[i]>t?o=i:n=i}return n}const c=i`<td class="TableCell">#text</td>`;function d(e){const t=c.cloneNode(!0),n=c.collect(t),{text:o}=n;o.nodeValue=e,t.__click=(()=>console.log("Click",e));let i=e;return t.update=function(e){e!==i&&(i=o.nodeValue=e)},t}const s=i`<tr></tr>`;const a=i`<table class="Table"><tbody #tbody></tbody></table>`;function u(e){const t=a.cloneNode(!0),n=a.collect(t),{tbody:o}=n;let i=[];return t.update=function(e){l("id",o,i,e.table.items,e=>(function(e){const t=s.cloneNode(!0);t.className=e.active?"TableRow active":"TableRow",t.dataset.id=e.id;const n=d("#"+e.id);t.appendChild(n);let o=[];return t.update=function(e){l("id",t,o,e.props,e=>d(e),(e,t)=>e.update(t),n),o=e.props.slice()},t.update(e),t})(e),(e,t)=>e.update(t)),i=e.table.items.slice()},t.update(e),t}const f=i`<div class="AnimBox"></div>`;const p=i`<div class="Anim"></div>`;function b(e){const t=p.cloneNode(!0);let n=[];return t.update=function(e){l("id",t,n,e.anim.items,e=>(function(e){const t=f.cloneNode(!0);t.dataset.id=e.id;const n=t.style;let o,i;return t.update=function(e){(i=e.time)!==o&&(n.background="rgba(0,0,0,"+(.5+i%10/10)+")",n.borderRadius=i%10+"px",o=i)},t.update(e),t})(e),(e,t)=>e.update(t)),n=e.anim.items.slice()},t.update(e),t}const h=i`<li class="TreeLeaf">#id</li>`;const g=i`<ul class="TreeNode"></ul>`;function v(e){const t=g.cloneNode(!0);let n=[];return t.update=function(e){l("id",t,n,e.children,e=>e.container?v(e):function(e){const t=h.cloneNode(!0),n=h.collect(t),{id:o}=n;return o.nodeValue=e.id,t}(e),(e,t)=>e.update&&e.update(t)),n=e.children.slice()},t.update(e),t}const m=i`<div class="Tree"></div>`;const C=i`<div class="Main">#section</div>`;function x(){const e=C,t=C.collect(e);let{section:n}=t;function o(e,t){return"table"===e?u(t):"anim"===e?b(t):"tree"===e?function(e){const t=m.cloneNode(!0),n=v(e.tree.root);return t.appendChild(n),t.update=function(e){n.update(e.tree.root)},t}(t):void 0}let i,l,r="";return e.update=function(t){(i=t.location)!==r?(l=o(i,t),e.replaceChild(l,n),n=l,r=i):n.update(t)},e}uibench.init("stage0","0.0.2"),document.addEventListener("DOMContentLoaded",n=>{!function(n){t[n]||(document.addEventListener(n,t=>e(t,n)),t[n]=!0)}("click");const o=document.querySelector("#App"),i=x();o.appendChild(i),uibench.run(e=>i.update(e),e=>console.debug({samples:e}))})}();
//# sourceMappingURL=app.min.js.map
